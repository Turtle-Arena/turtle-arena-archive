TMNT Arena TODO/BUGS file

Bugs that have found that have not been fixed yet, and things that should to be done (or that I'd like to be done...).

== House Keeping For Public Release! ==
* Use GNU FreeFonts (the GPL v2 or later ones)
** [todo] Replace OpenArena's menu/art/font1_prop.tga with GNU FreeSans
** [todo] Replace OpenArena's gfx/2d/bigchars with GNU FreeSans

== engine ==

// Weapons! (and attacking)
[todo] Allow using two guns at once and fix weapon hand offset stuff (like brass eject code and EV_RAILTRAIL) etc.
: Fire both at the same time or switch between them?

[todo] Add code so that Nunchuk can spin when attacking (and standing?), and when not spining have gravity
	(like CTF flag)
* Base on weapon barrel code.

STARTED: [todo] Change TMNTWEAPONS stuff that is system to TMNTWEAPSYS[|_EX]
:  Could use more cleaning?

STARTED [todo] Merge TMNTWEAPSYS_2 with TMNTWEAPSYS
: (Then I can remove the code that TMNTWEAPSYS_2 disables, etc)

STARTED ( TMNTWEAPSYS_2 ): [todo] Weapons Info System redesign.
: Reduce weapontype_t enum.
: "weaponinfo" (weapontype, sounds, blades" (points of damage/trail), wallmark, wallhit sounds)
: "weapongroup" (pointers to "weaponinfo"s, player animations, ...).
: "weapon_t" enum would index "weapon groups".
* DONE: Spawn weapon items from weaponinfo.txt, instead of hardcoded weapon items.
* The Team Arena weapons aren't fully supported.

[todo] Spawn Ammo items from weaponinfo.txt, instead of hardcoded ammo items.
: If I make it so weapon/ammo items are in text files, should I have all items in iteminfo.txt (and *.item) too?...

[todo] Have weapons be seperate entities (ET_WEAPON) from the player,
		allowing one rendering function that can be use for all weapons,
		and do collision so that weapons don't go into the wall. (And bounce back if you hit the wall?)
[todo-after-above] Add a option to weapon group info to hold a weapon upside-down.

[todo after ET_WEAPON] "Weapon Surface flags" so metal rubbing on metal makes sparks and stuff?
: Guns too? (Running next to a wall and gun is touching wall make sparks and wall marks O.O; )

[todo] Weapon trails; Every-so-often while attacking send EV_TRAIL_POS with the clientnum, trailnum,
	and trail base and top origins.
		When the trail end send EV_TRAIL_END clientnum and trailnum, so the next trail doesn't connect to last trail.
		When rendering create polygons connecting the trail.
		Each client think move the base of the trail up, and if (base[Z] >= top[Z]) remove this trail base/top

[todo] Attack movement flags. Stop, cut speed in half, double speed, turn right?, etc.

STARTED: [todo] Sword melee weapon bitflag, allow swords to cut things no one else can. (WIF_CUTS)
: So Leo (and other players with swords) can get places no one else can.

[bug] When kicking a player out of the game (that is using a grapple) their grapple chain is left behind!

[todo] Throw shurikens with secondary hand, so can't with CTF flag? Have only one attack animation.
[todo if above is done] Must put secondary weapon away to throw shuriken, then get it back put?
: So Don can throw shurikens sooner than Leo/Raph/Mike?

[todo] Per-triangle collision, use lowest LOD model or have a model special for collision?
: Using a special model for collision we could use group names to set what part of player is hit,
:   so shell takes less damage, banndana takes no damage, etc. We could say where a player got hit like Smokin' Guns?...

[todo] Remove code for tag_hand_primary/secondary and just use tag_weapon/flag ?
: Logic-wise tag_hand_* make more sense, but I still support tag_weapon/flag (My players use tag_weapon/flag ...)


// weapon-weights
DONE: [todo] Remove the need for fuzw.c
[todo-after-above] Fix up new weapon weight system.
: (TMNTWEAPSYS_2 removes weight system from botlib for selecting held weapon)
: Remove CHARACTERISTIC_WEAPONWEIGHTS from botfiles/[botname]_c.c and delete [botname]_w.c files

[todo] Remove the need for weapons in fuzi.c
: Load weapon item weights from weaponinfo.txt and .weap files or create weight from loaded info.

[todo] Check if "TMNTWEAPSYS // BOT_ITEM_INFOS" breaks compatibility with q3 mods.

// non-weapon or attacking...

[todo] Add optional run animations for torso

[todo] Finish new path system "g_paths.c" for movers (trains), NPCs?, (and hopefully players; cutscenes?, NiGHTS mode!)

[todo] Support models/players/NAME/animsounds.cfg used in STV:EF (SP?) (Also used in JK2) ?
: Started see bg_sound_t and Sounds_Parse; it is similar to animsounds, but different.
:    If currently doesn't load sounds and is for NPC and misc objects only.

[todo] Savegames for single player

[bug] cg_shadows 2 doesn't work if config is changed from default config?
: Which cvar is the problem?

[todo] Pull grapple back to player before removing entity like LoZ: TP?

[bug] When players have PW_FLASHING they can walk though Obelisks/misc_objects
		and if PW_FLASHING wheres off they get stuck in the object.

[todo] Have the HUD have a left side and a right side, so they can be drawn aspect-correct for 16:9 displays
	(and others).
: Have center too?
: Currently the HUD is aspect-correct but only uses the 4:3 center part of the screen.

[todo] Have dropped ET_ITEMs (weapons, holdables, powerups, etc) blink/flash before disaparing
: Using newly added RF_FORCE_ENT_ALPHA!
: Does cgame have any idea of when items are going to be removed?

[todo] Have shurikens do damage while they are in the wall/ground?

[todo] Add misc_bubbles entity.

[todo] Add misc_dripper entity.

[bug] Single Player scores are not saved. ( http://bugzilla.icculus.org/show_bug.cgi?id=4357 )

// The below are somewhat long...

[todo] Update camera system.
: Controls for moving chase cam (left, right, up, down) ~Currently use a long script from Team Arena...
::(Nights - Move camera if holding 'z' and move analog stick ~can't look around while moving)
: When attacking a player (or NPC) focus on them?  (Like LoZ:TP 'z' target lock-on)
BETTER(not done?): When moving the camera around the player, focus on the player. (Like in NiGHTS: Journey of Dreams)

[todo] Optional Analog Control input

[todo] Merge Quake3 and Team Arena bot chat systems; One chat system to rule them all!
* Problem: Team Arena adds voice chats, which are only used in gametypes >= GT_TEAM. There was also players that could only be used in gametypes >= GT_TEAM that did not have q3 chats. Leaving q3 players for FFA and Duel (with there normal q3 chats) (The TA players have no q3 chats and the players can't be used in q3, q3 players can't be used in gametypes >= GT_TEAM and have no voice chats.) So Team Arena had two seperate chat systems. TMNT Arena supports Q3 and Team Arena players in all gametypes and allows merged Q3/TA players. But in the gametypes >= GT_TEAM ONLY the TA voice chats are used. And like wise in non-team gametypes only "Q3 chats" are used.
* Fix: Merge systems.
** Allow sound filenames in Q3 chat files?
** Everywhere that passes a "Q3 chat" name use voice chats instead.
** Set voicechat filename and soundpath in "head.cfg" in player head directory. Head animations would go in it as well.
*** Or Load it from animation.cfg and allow loading 2 animation.cfg files for each player, one for body and one for head.

[todo] Add MD5 model support (MD5 use single model and skeleton, the animations can move any part of the model, and multiple animations can 'run' at the same time.)

[todo] Finish misc_object, with animation, triggering, taking-damage, and dieing.
: Maybe with spawning a item on death, respawning, and pushable options.
: I will need some test models (with animations)

[todo] Add engine/code/libs/win32/libtheora.a for win32 mingw

=== Testing! ===
DONE(untested)?: Melee combo system, with different animations for each attack? (TMNTWEAPSYS)

[todo] Test/use the "noise" and "random" waveforms that I copied from IOSTVEF

=== Don't do? (Dead Ideas?) ===
[todo] Feet tags, for attack checking? And/or for attaching hoverboard to player?

[todo] Use vertex lighting on misc_model entities? http://xreal.svn.sourceforge.net/viewvc/xreal?view=rev&revision=3049
: Turtle Man: I could add a option so use vertex lighting, but normally use lightmapping?
:   OR Just use misc_object as they use vertex lighting.
:        Misc_model is a way to insert a *static* model, so lightmap like the level.

WONTFIX?: [bug] Raph's legs go through his shell when crouching and looking at the floor.

WONTFIX?: [bug/todo] First Person weapon doesn't draw correctly (It draws too near to the screen)
			This happens due to changing the field of view to 70 (Q3 uses 90)

[todo] Have Announcer use "voice chats" so that the text is printed as well as playing a sound.
[todo] Allow multiple Announcers? Have a cg_announcer cvar { "none", "male", "female", etc } to control voice chat file.

=== Done? ===
DONE?: TMNTWEAPSYS weapon_random entity that spawns a random weapon each time the weapon respawns
		: Only spawn weapons with a classname, have flags for melee and gun weapon spawning.
[todo] ...also allow list of weapons in message field?

DONE: Allow mover entites to be killed (set health in entity)
[todo] Spawn glass and/or other materials on death of mover entities.

DONE-ish?: Use freetype for TTF rendering, instead of q3font.exe's output files of a TTF. (Almost completed in Xreal)
: Well I no longer need q3font.exe, as copied/fixed the freetype code (Also support in console and hud consoles lines)
:   But most in game text does not support TTF.

WORKING(NotDone?): Have bots use shurikens. (They are used *to much* now.)

DONE: Have player fade out when dead instead of BodySink
: Does it look good?


== BSPC ==
// BSPC is the BSP map to .aas (Arena Awareness System) compiler. The aas file is used by bots.
[bug] Fix compiling with (cross-make-)mingw.


== Master Server ==
[todo] Should dpmaster be modified for TMNT Arena? (It should work as is...)


== Data ==
DONE: Replace all of the data (that I need) in Demo Quake3's pak0.pk3
		(Also it appears that the full version doesn't add data "for the engine",
			just players, maps, and textures, (etc?))

[todo] Add announcer sound files (That sound like the Gyoji of the Battle Nexus?)

[todo] Have weapon models for all weapons;
* Missing Katana (Daisho), Wakizashi (Daisho), Daisho pickup, Bamboo, and Nunchuk

[todo] Have a intro video (video/intro.[roq|ogm]) before the menu.

[todo] Have shurikens in all multi-player maps? (Having them be part of standard gameplay?)

=== Players ===
[todo] Raph and Casey really need to /swing/ the melee weapons.
: Casey's swinging isn't that bad, but Raph's swinging sure is.

==== Raph =====
[todo] Animate raph_v9.mm3d

==== Casey =====
[todo] Finish Casey Jones model mesh
: Casey's feet look ugly (fix them), and allow the toes to bend.

[todo] Add Casey bot chats.


== Misfit Model 3D ==
: Stuff I'd like to do to the MD3 part of MM3D...

[todo] Replace hardcode loopframe list with ' "MD3_LOOPFRAMES" "00010101010" ' (use real list...) in the metadata
: Or have the "Loop" in the animation view set the loop for the animation,
:  currently "Loop" isn't per animation however.

[todo] Metadata to set type of loop frames (Quake3 or Elite Force) or have "2" in MD3_LOOPFRAMES be Elite style?

[todo] Metadata to set type of animations to save in animation.cfg?
: Quake3 (and Elite Force MP) "0 0 0 0 // TYPE_NAME"
: Elite Force SP "TYPE_NAME 0 0 0 0"

[todo] Make sure the MD3_PATH? is set when exporting a player, because I have to open and save the model
	(with no change) to fix lighting?

[todo] Finish writing (and porting my work from old verion to svn head) MDR plugin for Misfit Model 3D.

