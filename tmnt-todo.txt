TMNT Arena TODO/BUGS file

Bugs that have found that have not been fixed yet, and things that should to be done (or that I'd like to be done...).

== House Keeping For Public Release! ==
* Use GNU FreeFonts (the GPL v2 or later ones)
** [todo] Replace OpenArena's menu/art/font1_prop.tga with GNU FreeSans
** [todo] Replace OpenArena's gfx/2d/bigchars with GNU FreeSans

== engine (server/client/game/cgame/ui, in more then one or I don't know where) ==

[todo] Review the chages in Meld, checking for errors and undoing unneeded changes to syntax.

[todo] Clean up IOQ3ZTM // LERP_FRAME_CLIENT_LESS remove the "dead" code,
		code in ifndef IOQ3ZTM // LERP_FRAME_CLIENT_LESS and ifdef IOQ3ZTM <> else <dead code> endif

// Weapons! (and attacking)
[todo] Allow using two guns at once and fix weapon hand offset stuff (like brass eject code) etc.
* May help? (Not really related... at all)
http://web.archive.org/web/20071219193415/http://code3arena.planetquake.gamespy.com/tutorials/tutorial26.shtml

[todo] Add code so that Nunchuk can spin when attacking (and standing?), and when not spining have gravity
	(like CTF flag)
* Base on weapon barrel code.

STARTED: [todo] Change TMNTWEAPONS stuff that is system to TMNTWEAPSYS[|2|_2]
: Cleaned up TMNTWEAPONS, it no longer adds weapon code that isn't used when TMNTWEAPSYS_2 is defined.
:  Could use more cleaning?

[todo] Merge TMNTWEAPSYS_2 into TMNTWEAPSYS (Then I can remove the code that TMNTWEAPSYS_2 disables, etc)

[todo] Weapons Info System redesign; (Started, TMNTWEAPSYS_2 )
: Reduce weapontype_t enum to be (WT_NONE, WT_GAUNTLET (cross of gun and melee), WT_GUN, WT_MELEE). Have "weaponinfo" (weapontype, mod, (blade)damage, (blade)trail, sounds, bit-flags, "blades" (points of damage/trail), wallmark, wallhit sounds) and "weapongroup" (pointers to "weaponinfo"s, player animations, animations when holding CTF flag, combo/chain limits, ???). "weapon_t" enum would index "weapon groups".
* It is working, still need to generalize all of the weapons so that there is no WP_* enum.
: I disabled the WP_*s but some of the Team Arena weapon code had to be disabled as well.
** DONE: Spawn weapon items from weaponinfo.txt, instead of hardcoded weapon items.
* Spawn Ammo items from weaponinfo.txt, instead of hardcoded ammo items.
: If I make it so weapon/ammo items are in text files, should I have all items in iteminfo.txt (and *.item) too?...

[todo] Have weapons be seperate entities (ET_WEAPON) from the player,
		allowing one rendering function that can be use for all weapons,
		and do collision so that weapons don't go into the wall. (And bounce back if you hit the wall?)
[todo-after-above] Add a option to weapon group info to hold a weapon upside-down.

[todo] Weapon trails; Every-so-often while attacking send EV_TRAIL_POS with the clientnum, trailnum,
	and trail base and top origins.
		When the trail end send EV_TRAIL_END clientnum and trailnum, so the next trail doesn't connect to last trail.
		When rendering create polygons connecting the trail.
		Each client think move the base of the trail up, and if (base[Z] >= top[Z]) remove this trail base/top

[todo] Attack movement flags. Stop, cut speed in half, double speed, turn right?, etc.

[todo] Sword melee weapon bitflag, allow swords to cut things no one else can. (WIF_CUT?)
: So Leo can get places no one else can.

[todo] "Weapon Surface flags" so metal rubbing on metal makes sparks and stuff?
: Guns too? (Running next to a wall and gun is touching wall make sparks and wall marks O.O; )

[bug] When kicking a player out of the game (that is using a grapple) their grapple chain is left behind!

[todo] Throw shurikens with secondary hand, so can't with CTF flag? Have only one attack animation.
[todo if above is done] Must put secondary weapon away to throw shuriken, then get it back put?
: So Don can throw shurikens sooner than Leo/Raph/Mike?

[todo] Per-triangle collision, use lowest LOD model or have a model special for collision?
: Using a special model for collision we could use group names to set what part of player is hit,
:   so shell takes less damage, banndana takes no damage, etc. We could say where a player got hit like Smokin' Guns?...

// weapon-weights
[todo] Remove the need for fuzw.c (Use const weights in weaponinfo.txt?) remove the weapons from fuzi.c

[todo] Fix up new weapon weight system (TMNTWEAPSYS_2 removes weight system from botlib for selecting held weapon)
[todo-after-above] Remove CHARACTERISTIC_WEAPONWEIGHTS from botfiles/[botname]_c.c and delete [botname]_w.c
: WONTDO?: [todo] Allow setting the names of the bots favorite weapons? Casey likes bat/hockey stick/etc? Leo likes swords?
[todo] Load weapon item weights from weaponinfo.txt and .weap files.

// non-weapon or attacking...

[todo] Add optional run animations for torso?

[todo] Finish new path system "g_paths.c" for movers (trains), NPCs?, (and hopefully players; cutscenes?, NiGHTS mode!)

[todo] Support models/players/NAME/animsounds.cfg used in STV:EF (SP?) (Also used in JK2) ?
: Started see bg_sound_t and Sounds_Parse; it is similar to animsounds, but different.
:    If currently doesn't load sounds and is for NPC and misc objects only.

[todo] Savegames for single player

[todo] cg_shadows 2 doesn't work if config is changed from default config?
: Which cvar is the problem?

[todo] Pull grapple back to player before removing entity, like LoZ: TP?

[bug] When players have PW_FLASHING they can walk though Obelisks/misc_objects
		and if PW_FLASHING wheres off they get stuck in the object.

// The below are somewhat long...

[todo] Update camera system. Q3 third person camera is great and all for a first person game, but not a third person one...
: Controls for moving chase cam (left, right, up, down) ~Currently use a long script from Team Arena...
::(Nights - Move camera if holding 'z' and move analog stick ~can't look around while moving)
: When attacking a player (or NPC) focus on them?  (Like LoZ:TP 'z' target lock-on)
BETTER(not done?): When moving the camera around the player, focus on the player. (Like in NiGHTS: Journey of Dreams)
[todo-after-above] Analog Control

[todo] Merge Quake3 and Team Arena bot chat systems; One chat system to rule them all!
* Problem: Team Arena adds voice chats, which are only used in gametypes >= GT_TEAM. There was also players that could only be used in gametypes >= GT_TEAM that did not have q3 chats. Leaving q3 players for FFA and Duel (with there normal q3 chats) (The TA players have no q3 chats and the players can't be used in q3, q3 players can't be used in gametypes >= GT_TEAM and have no voice chats.) So Team Arena had two seperate chat systems. TMNT Arena supports Q3 and Team Arena players in all gametypes and allows merged Q3/TA players. But in the gametypes >= GT_TEAM ONLY the TA voice chats are used. And like wise in non-team gametypes only "Q3 chats" are used.
* Fix: Merge systems.
** Allow sound filenames in Q3 chat files?
** Everywhere that passes a "Q3 chat" name use voice chats instead.
** Set voicechat filename and soundpath in "head.cfg" in player head directory. Head animations would go in it as well.
*** Or Load it from animation.cfg and allow loading 2 animation.cfg files for each player, one for body and one for head.

[todo] Rewrite player Upper, Lower, and Both animations ( TMNTPLAYERSYS_2 )
: Allow all animations to be anytype (Upper, lower, or both), when changing to a animations use "STAND" (instead of "TORSO_STAND") and check for BOTH_STAND if not found try TORSO_STAND AND LEGS_STAND.

[todo] Finish misc_object, with animation, triggering, taking-damage, and dieing.
: Maybe with spawning a item on death, respawning, and pushable options.
: I will need some test models (with animations)

[todo] Add support for .ogm video playback (Xreal copied from World of Padman engine)
	(It should be in ioq3, so that each standalone mod doesn't add support for it...)
** http://apps.sourceforge.net/trac/xreal/changeset/3297
** http://apps.sourceforge.net/trac/xreal/changeset/3300
** http://wop-engine.svn.sourceforge.net/viewvc/wop-engine?view=rev&revision=71
** http://wop-engine.svn.sourceforge.net/viewvc/wop-engine?view=rev&revision=73
** http://wop-engine.svn.sourceforge.net/viewvc/wop-engine?view=rev&revision=82

=== Testing! ===
DONE(untested)?: Melee combo system, with different animations for each attack? (TMNTWEAPSYS_2)

DONE(untested): [todo] Add nailtrail.tga and support nailtrail, etc

[todo] Test/use the "noise" and "random" waveforms that I copied from IOSTVEF

=== Don't do? (Dead Ideas?) ===
[todo] Rename qkey? (To key, guid_key, or guidkey?)

[todo] Feet tags, for attack checking? And/or for attaching hoverboard to player?

[todo] Get code/ogg and code/vobis from XReal? (Ogg vorbis works but should the code for it be in our source? Lke jpeg/speex/etc)
: It works fine the way it is, but may not be "correct"?

[todo] Use vertex lighting on misc_model entities? http://xreal.svn.sourceforge.net/viewvc/xreal?view=rev&revision=3049
: Turtle Man: I could add a option so use vertex lighting, but normally use lightmapping?
:   OR Just use misc_object as they use vertex lighting.
:        Misc_model is a way to insert a *static* model, so lightmap like the level.

[todo] Third person crosshair (like JK2/JKA) for shurikens/guns,
	do trace and draw sprite (must scale so it doesn't get really small)?
: Plus do I want there to always be a crosshair?
: Plus I added autoaim to sort of remove the need for a crosshair,
:     it *should* shoot the player/Overload-base in front of you. (It still needs work though.)

WONTFIX?: [bug] Raph's legs go through his shell when crouching and looking at the floor.
INVALID?: [bug] Bots [skill 5?] know where you are when they shouldn't be able to see you?


=== cgame ===
[todo] Have the HUD have a left side and a right side, so they can be drawn aspect-correct for 16:9 displays
	(and others).
* Have center too?

[todo] Have dropped ET_ITEMs (weapons, holdables, powerups, etc) blink/flash before disaparing
: Using newly added RF_FORCE_ENT_ALPHA!

[bug/todo] First Person weapon doesn't draw correctly (It draws too near to the screen)
			This happens due to changing the field of view to 70 (Q3 uses 90)

=== botlib ===
[todo] Load weapon items from "scripts/weaponinfo.txt" instead of from "botfiles/items.c"


== BSPC ==
// BSPC is the BSP map to .aas (Arena Awareness System) compiler. The aas file is used by bots.
[todo] Fix "make clean". It doesn't remove the .o files, only the bspc binary


== Master Server ==
[todo] Should dpmaster be modified for TMNT Arena? (It should work as is...)


== Data ==
DONE: Replace all of the data (that I need) in Demo Quake3's pak0.pk3
		(Also it appears that the full version doesn't add data "for the engine",
			just players, maps, and textures, (etc?))

[todo] Add announcer sound files (That sound like the Gyoji of the Battle Nexus?)
[todo] Have Announcer use "voice chats" so that the text is printed as well as playing a sound.
[todo] Allow multiple Announcers? Have a cg_announcer cvar { "none", "male", "female", etc } to control voice chat file.

[todo] Have weapon models for all weapons;
* Missing Katana (Daisho), Wakizashi (Daisho), Daisho pickup, Bamboo, and Nunchuk

[todo] Have a intro video (video/intro.[roq|ogg]) before the menu. (Not happening anytime soon...)

[todo] Have shurikens in all multi-player maps? (Having them be part of standard gameplay?)

=== Players ===
[todo] Raph and Casey really need to /swing/ the melee weapons.
: Casey's swinging isn't that bad, but Raph's swinging sure is.

==== Raph =====
[todo] I *need* to finish (make look nice) Raph's mesh and skin, so I can begin re-rigging and re-animating.

[todo] Rerigging Raph's model.
[bug -fix by above] Raph's torso_attack_gun only the head moves (Need to remake the skeleton...)

[todo] Reanimate Raph.

==== Casey =====
[todo] Finish Casey Jones model mesh
: Casey's feet look ugly (fix them), and allow the toes to bend.

[todo] Add Casey bot chats.


== Misfit Model 3D ==
: Stuff I'd like to do to the MD3 part of MM3D...

[todo] Replace hardcode loopframe list with ' "MD3_LOOPFRAMES" "00010101010" ' (use real list...) in the metadata

[todo] Metadata to set type of loop frames (Quake3 or Elite Force) or have "2" in MD3_LOOPFRAMES be Elite style?

[todo] Metadata to set type of animations to save in animation.cfg?
: Quake3 (and Elite Force MP) "0 0 0 0 // TYPE_NAME"
: Elite Force SP "TYPE_NAME 0 0 0 0"

[todo] Make sure the MD3_PATH? is set when exporting a player, because I have to open and save the model
	(with no change) to fix lighting?

[todo] Finish writing (and porting my work from old verion to svn head) MDR plugin for Misfit Model 3D




=== Done? ===
DONE?: TMNTWEAPSYS_2 weapon_random entity that spawns a random weapon each time the weapon respawns
		: Only spawn weapons with a classname, have flags for melee and gun weapon spawning.
[todo] ...also allow list of weapons in message field?

DONE (misc_shooter): TMNTWEAPSYS_2: Have only one shooter_* and use "message" field for weapon [group?] name.
[todo] Currently it would be hard, but have misc_shooter use projectile name instead of weapopn group
* It reuses player firing code (CG_FireWeapon) which needs weapon group, and firing sounds are part of weapon group.

DONE: Allow mover entites to be killed (set health in entity)
[todo] ...and spawn glass and/or other materials on death.

DONE-ish?: Use freetype for TTF rendering, instead of q3font.exe's output files of a TTF. (Almost completed in Xreal)
: Well I no longer need q3font.exe, as copied/fixed the freetype code (Also support in console and hud consoles lines)
:   But most in game text does not support TTF.

WORKING(NotDone?): Have bots use shurikens. (They are used *to much* now.)

DONE: Have shurikens do damage while they are in the wall/ground?
: Does it work??

DONE: Have player fade out when dead instead of BodySink
: Does it look good?

=== Done ===
DONE: Learn how to enable coronas (light flares). (r_flares cvar, base/gfx/misc/flare.jpg, and q3map2 -meta -flares)

DONE: Add modelRed and modelBlue to allow different models (for q3/ta prox).
: If model* isn't found fallback to model (So only model/modelBlue would be needed for q3/ta prox)

FIXED: Misc_Object mins/maxs don't get set in SP_misc_object I get the correct values in bg_misc.c from the cfg file,
		but can't for the life of me get the values into game
		(They are compiled together, right? SO THEN WHY DOESN'T IT WORK! *screams*)
	: Ug... there was no filename, so it couldn't open the config file...

FIXED: playerState_t only sends 16bits of eflags, while entity sends 19 (snap/local player bug).
: I didn't understand bug till seeing; http://wop-gamecode.svn.sourceforge.net/viewvc/wop-gamecode?view=rev&revision=53
: Fixed by sending 32 bits for playerState and entity. (Caused me bugs two times)

DONE: Default cg_teamchat LERP_FRAME_CLIENT_LESSto on (And don't show team chat in normal hud lines)

DONE: Have "Fire Shurikens" stick in wall and explosion, instead of rocket clone or grenade-like. ?
: I liked the grenade...

DONE(Used IOSTVEF): RF_FORCE_ENT_ALPHA (Force Entity Alpha) used by iostvef. (Similar RF_FORCEENTALPHA in World of Padman).
: IOSTVEF: http://thilo.kickchat.com/efport-progress/
: WoP: http://wop-engine.svn.sourceforge.net/viewvc/wop-engine?view=rev&revision=12

FIXED: Player can do melee damage while dead.
FIXED: Grappling hook always comes from player 0.

DONE: Disable crouch while flying and swimming.
DONE: Change Raph to not say curses!.
DONE: Can Raph says "Well it sure took you long enough." alot... say something else as well.
DONE: Have "cg_thirdPerson" be a cheat? (So players can't use first person?)
DONE: Add power ring models for defense, speed, strength.
DONE: Change death messages "sank like a rock" should just be "drown"
DONE: Add a model for when using HI_MEDKIT.

DONE: Have models for all items

* FIXED: New Hunk_Alloc failed message when using my game VM (not when using .so as memory isn't Hunk_Alloc isn't called?)
** Make the hunk be bigger? (but what is causing it to be to big?)
: http://openmohaa.svn.sourceforge.net/viewvc/openmohaa?view=rev&revision=39
: The cause of being to big was I allowed for WAY to many loadable sounds(MAX_ENTITIES * MAX_ANIMATIONS*4 * 10/* rnd sounds */)
:   for misc_object/npcs ...and the loading code isn't finished so none of the sound stuff was even used.
: I didn't see it as it works fine as a .so file...

DONE: Change multiplayer menu; Don't automaticly go to server list, list Join (Search), Join (Specify), and Player


=== EDITOR CONFIG ===
DONE: Add a note about team_red/blueobelisk are red/blue CTF flag base models as well.


